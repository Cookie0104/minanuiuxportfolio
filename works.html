<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>專案介紹 - 我的作品集</title>
    <link rel="icon" type="image/svg+xml" href="img/favicon.svg" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="header-content">
        <div class="logo">Min-An's Portfolio</div>
        <button class="menu-toggle" id="menuToggle" aria-label="選單">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="nav-overlay" id="navOverlay"></div>
        <nav class="nav" id="mainNav">
          <a href="index.html" class="nav-link" data-i18n="nav.home">首頁</a>
          <a href="about.html" class="nav-link" data-i18n="nav.about">關於我</a>
          <a href="works.html" class="nav-link active" data-i18n="nav.works"
            >作品集</a
          >
          <a href="gallery.html" class="nav-link" data-i18n="nav.gallery"
            >圖片集</a
          >
          <!-- 第一版暫時隱藏留言互動功能 -->
          <!-- <a href="contact.html" class="nav-link" data-i18n="nav.contact"
            >留言互動</a
          > -->
          <!-- 第一版暫時隱藏語言切換功能 -->
          <!-- <div class="lang-switch">
            <button class="lang-btn active" data-lang="zh">中</button>
            <button class="lang-btn" data-lang="en">EN</button>
          </div> -->
        </nav>
      </div>
    </header>

    <main class="container container-page">
      <section class="page-header">
        <h1 data-i18n="works.title">作品集</h1>
        <p data-i18n="works.subtitle">展示你最有代表性的專案或作品。</p>
      </section>

      <section class="card-grid">
        <article class="card" data-project="1">
          <div class="card-image">
            <img src="img/UCBimg-phone.png" alt="UCB Mobile Banking App" />
          </div>
          <div class="card-content">
            <div class="card-badge-group">
              <span class="card-badge">App</span>
              <span class="card-badge">跨國專案</span>
              <span class="card-badge">行動銀行</span>
            </div>
            <h2 class="card-title">UCB Mobile Banking App</h2>
            <p class="card-desc">
              隨著柬埔寨經濟快速發展，行動銀行需求大幅提升。本專案為UCB(銀行子行)打造在地化數位金融服務，自2018年由團隊從零建置，持續迭代功能與體驗，提升用戶觸及率與黏著度。
            </p>
            <ul class="tag-list">
              <li class="tag">React</li>
              <li class="tag">API</li>
            </ul>
          </div>
        </article>

        <article class="card" data-project="2">
          <div class="card-image">
            <img src="img/HRimg-phone.png" alt="專案名稱 B" />
          </div>
          <div class="card-content">
            <div class="card-badge-group">
              <span class="card-badge">體驗優化</span>
              <span class="card-badge">SaaS系統</span>
              <span class="card-badge">Design System</span>
            </div>
            <h2 class="card-title">專案名稱 B</h2>
            <p class="card-desc">
              如果你有設計相關的作品，可以放一些介面設計、流程圖或原型的連結。
            </p>
            <ul class="tag-list">
              <li class="tag">Figma</li>
              <li class="tag">Prototype</li>
            </ul>
          </div>
        </article>

        <article class="card" data-project="3">
          <div class="card-image">
            <img src="img/packyourname-cover.png" alt="個人小作品" />
          </div>
          <div class="card-content">
            <div class="card-badge-group">
              <span class="card-badge">Side Project</span>
              <span class="card-badge">跨平台設計</span>
            </div>
            <h2 class="card-title">個人小作品</h2>
            <p class="card-desc">
              可以放一些你在下班後或學習期間做的小工具、小遊戲或實驗性專案。
            </p>
            <ul class="tag-list">
              <li class="tag">JavaScript</li>
              <li class="tag">Side Project</li>
            </ul>
          </div>
        </article>
      </section>
    </main>

    <!-- 專案詳情彈窗 -->
    <div class="project-modal" id="projectModal">
      <div class="modal-overlay" id="modalOverlay"></div>
      <div class="modal-content-wrapper">
        <button class="modal-close" id="modalClose" aria-label="關閉">×</button>
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-badge" id="modalBadge"></div>
            <h2 class="modal-title" id="modalTitle"></h2>
          </div>
          <div class="modal-body" id="modalBody">
            <!-- 詳細內容會在這裡動態插入 -->
          </div>
          <div class="modal-footer" id="modalFooter">
            <!-- 連結會在這裡動態插入 -->
          </div>
        </div>
        <aside class="modal-sidebar" id="modalSidebar">
          <nav class="modal-nav" id="modalNav">
            <!-- 滾動監聽導航會在這裡動態生成 -->
          </nav>
        </aside>
      </div>
    </div>

    <footer class="site-footer">
      <p>
        © <span id="year"></span> minan by vibe coding
      </p>
    </footer>

    <script src="lang.js"></script>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
      
      // 側邊欄控制
      const menuToggle = document.getElementById("menuToggle");
      const mainNav = document.getElementById("mainNav");
      const navOverlay = document.getElementById("navOverlay");
      
      function toggleNav() {
        mainNav.classList.toggle("active");
        menuToggle.classList.toggle("active");
        if (navOverlay) {
          navOverlay.classList.toggle("active");
        }
      }
      
      function closeNav() {
        mainNav.classList.remove("active");
        menuToggle.classList.remove("active");
        if (navOverlay) {
          navOverlay.classList.remove("active");
        }
      }
      
      if (menuToggle && mainNav) {
        menuToggle.addEventListener("click", toggleNav);
        
        if (navOverlay) {
          navOverlay.addEventListener("click", closeNav);
        }
        
        mainNav.querySelectorAll(".nav-link").forEach(link => {
          link.addEventListener("click", closeNav);
        });
      }

      // 專案詳情彈窗
      const projectModal = document.getElementById("projectModal");
      const modalOverlay = document.getElementById("modalOverlay");
      const modalClose = document.getElementById("modalClose");
      const modalBadge = document.getElementById("modalBadge");
      const modalTitle = document.getElementById("modalTitle");
      const modalBody = document.getElementById("modalBody");
      const modalFooter = document.getElementById("modalFooter");

      // 專案詳細內容資料
      const projectData = {
        1: {
          badge: ["App", "跨國專案", "行動銀行"],
          title: "UCB Mobile Banking App",
          description: "隨著柬埔寨經濟快速發展，行動銀行需求大幅提升。本專案為UCB(銀行子行)打造在地化數位金融服務，自2018年由團隊從零建置，持續迭代功能與體驗，提升用戶觸及率與黏著度。",
          tags: ["Figma", "Design Library", "NPS", "KANO"],
          link: null,
          linkText: null,
          details: `
            <h3>專案概述</h3>
            <p>隨著柬埔寨經濟快速發展，行動銀行需求大幅提升。本專案為UCB(銀行子行)打造在地化數位金融服務，自2018年由團隊從零建置，持續迭代功能與體驗，提升用戶觸及率與黏著度。</p>
            
            <div class="project-image">
              <img src="img/UCB/ucb0.png" alt="UCB專案概述" />
            </div>
            
            <h3>負責內容</h3>
            <ul>
              <li>2019｜UI 設計：延續既有風格，針對新功能提出設計解法</li>
              <li>2023｜UX 規劃：負責 Wireframe 與流程設計、重新梳理核心體驗</li>
              <li>建立設計規範 Library，並將工具從 Sketch 轉換為 Figma</li>
              <li>整合翻譯詞彙表、設計多語系介面（柬文、英文、中文）</li>
              <li>跨部門協作：與 PM、IT、BA 及柬國主管機關協作</li>
              <li>2024｜執行使用者研究：NPS、KANO 分析、易用性測試</li>
            </ul>
            
            <div class="project-results-highlight">
              <h3>專案成效</h3>
              <ul>
                <li>流程效能提升：導入 Figma 促進跨部門協作與即時設計溝通</li>
                <li>系統化設計管理：建立設計系統與元件庫，整理 UI 元件與規範，提升接手效率並降低交接風險</li>
                <li>用戶滿意度提升：自 2019 年起 NPS 淨推薦值穩定成長</li>
                <li>更貼近在地需求：翻譯標準化與文化語境調整，提升理解與好感度</li>
                <li>數據導向決策：導入 KANO 模型提升需求優先度決策效率，降低試錯成本</li>
              </ul>
            </div>
            
            <div class="project-image">
              <img src="img/UCB/ucb1.png" alt="UCB專案成效1" />
              <p class="image-caption">Wireframe設計階段(第三方支付)</p>
            </div>
            
            <div class="project-image">
              <img src="img/UCB/ucb2.png" alt="UCB專案成效2" />
              <p class="image-caption">柬埔寨國旗為深藍色底，App使用深藍為主題，搭配主要顏色為玉山銀行的企業色。</p>
            </div>
            
            <h3>專案重點與挑戰</h3>
            
            <h4>語言與排版的挑戰</h4>
            <p>柬埔寨國人主要使用語言有三種，App必須皆支援；因此在設計的時候，需要盡量保持介面上的彈性，不去限制文字區塊的寬度，方能載入三種語言時，在介面上完整顯示。</p>
            
            <div class="project-image">
              <img src="img/UCB/ucb10.png" alt="UCB語言與排版挑戰" />
            </div>
            
            <div class="project-results-highlight">
              <h4>支援多語系App設計要點</h4>
              <ul>
                <li>避免文字區塊限制寬度，確保不同語言皆能良好呈現</li>
                <li>建立翻譯對照表，標準化、一致化 Wording 並提升溝通效率</li>
              </ul>
            </div>
            
            <h4>用語的文化差異</h4>
            <p>初期使用 Transfer-in/out Account等銀行常用術語，易用性測試後改為當地更習慣的 From/To Account，提升用語親和力，此後新功能的翻譯皆與當地人討論用語，提升認同感與理解度。</p>
            
            <div class="project-image">
              <img src="img/UCB/ucb9.png" alt="用語文化差異示例" />
            </div>
            
            <h4>維護設計一致性</h4>
            <p>此專案為大型維運專案，歷時長久，團隊成員人事變動頻繁，App經手許多設計師以及工程師，導致前後期產品元素及想法因人而異。為達成一致性，團隊決議轉換工具，由Sketch改為Figma，整理App設計規範，建立Components & Library，以確保未來接手之設計師有規範可遵循。</p>
            
            <div class="project-image">
              <img src="img/UCB/ucb3.png" alt="於Figma建立設計規範與元件Library" />
              <p class="image-caption">於 Figma 建立設計規範與元件 Library</p>
            </div>
            
            <div class="project-image">
              <video controls>
                <source src="img/UCB/ucb4.mp4" type="video/mp4">
                您的瀏覽器不支援影片播放。
              </video>
              <p class="image-caption">製作設計規範網站，協助前端工程師對齊設計細節</p>
            </div>
            
            <h4>使用習慣 vs 設計趨勢</h4>
            <p>東南亞用戶偏好「九宮格首頁」，與台灣常見個人化首頁不同，2023年團隊根據市場觀察調整為九宮格首頁，並追蹤競品設計走向。</p>
            
            <div class="project-image">
              <img src="img/UCB/ucb5.png" alt="UCB手機銀行首頁設計演進" />
              <p class="image-caption">UCB 手機銀行的首頁設計經過不斷演進，逐步對齊我們對當地用戶習慣與偏好的觀察。</p>
            </div>
            
            <div class="project-image">
              <img src="img/UCB/ucb6.png" alt="2023年競品改版" />
              <p class="image-caption">2023 年，當地主要競品大改版，明顯趨向個人化首頁設計。</p>
            </div>
            
            <h4>產品策略的選擇與思考</h4>
            <p class="thought-provoking-question">設計該「迎合」當地習慣，或「引導」行為改變？</p>
            <p>每項決策前，若能先透過訪談/問卷/數據了解真實需求，將能引導產品邁向更符合期待的發展方向。</p>
            <p>此後，針對 BA 團隊提出的需求，我們會盡可能尋找相關數據進行分析，協助釐清背後的實際問題，以驗證需求的真實性與合理性。</p>
            
            <div class="project-image">
              <img src="img/UCB/ucb8.png" alt="詳細資訊頁面改版建議項目" />
            </div>
            
            <h3>專案反思</h3>
            
            <h4>文化距離與同理</h4>
            <p>由於目標族群與我們有很大的文化差異，本案讓我意識到設計思維不能以自身經驗為中心，需深入觀察在地使用習慣並反覆驗證假設。未來若能在初期就投入更多使用者研究資源，將能更有效掌握市場趨勢與真實需求，打造更貼近人心的產品體驗。</p>
            
            <h4>導入使用者研究分析需求</h4>
            <p>因應本次「九宮格設計」專案的使用回饋，以及過往部分功能使用率偏低的經驗，團隊決議每年定期導入 KANO 分析，作為需求優先順序的客觀依據，協助業務單位聚焦關鍵功能，避免資源與時間浪費在低效開發上。</p>
          `
        },
        2: {
          badge: ["體驗優化", "SaaS系統", "Design System"],
          title: "HR人資系統與入職體驗優化",
          description: "因舊系統（菁英甄選）即將於 2024 年底停止支援，「HR人資系統與入職體驗優化」專案於2023年啟動。目標是整合既有流程中可改善的部分，優化新進員工從面試、報到到入職的整體體驗。",
          tags: ["Figma", "Card Sorting", "Usability Testing"],
          link: null,
          linkText: null,
          details: `
            <h3>專案概述</h3>
            <p>因舊系統（菁英甄選）即將於 2024 年底停止支援，「HR人資系統與入職體驗優化」專案於2023年啟動。目標是整合既有流程中可改善的部分，優化新進員工從面試、報到到入職的整體體驗。</p>
            
            <h3>負責內容</h3>
            <ul>
              <li>釐清 HR 在「面試」「報到」階段的痛點</li>
              <li>與 HR 合作主持卡片分類法，重新規劃入職資訊架構</li>
              <li>規劃甄選系統 wireframe，負責 flow mapping 與前端切版</li>
              <li>整理 Figma 設計規範與 Library，建立共用資源</li>
              <li>執行 易用性測試，驗證設計是否符合實際需求</li>
            </ul>
            
            <div class="project-results-highlight">
              <h3>專案成效</h3>
              <ul>
                <li>協助釐清5種用戶角色與使用流程，打造更清晰的用戶旅程圖</li>
                <li>透過卡片分類法優化新人專區頁面架構，提升資訊可找性與導航效率</li>
                <li>執行易用性測試，成功找出使用痛點並優化設計，減少後期開發改版成本</li>
                <li>建立設計系統元件庫，縮短後續設計與開發對接時程</li>
              </ul>
            </div>
            
            <h3>設計流程</h3>
            
            <h4>-Step 1｜釐清流程與角色</h4>
            <p>專案涵蓋「甄選網站」「甄選後台」「入職體驗」三大模組，涉及五種角色(人資主管、人資專員、求職者、面試官、用人主管)。初期與 HR 共同盤點線上/線下操作流程，建立完整服務地圖，作為 wireframe 繪製與功能設計依據。</p>
            <div class="project-image">
              <img src="img/HR/hr1.png" alt="釐清流程與角色" />
            </div>
            
            <h4>-Step 2｜卡片分類法：資訊架構重整</h4>
            <p>邀請 HR 同仁一同參與實作卡片分類法，將新人入職資訊進行視覺化分類與整理，讓頁面內容更貼近使用者理解邏輯。</p>
            <div class="project-image">
              <img src="img/HR/hr2.jpg" alt="卡片分類法" />
            </div>
            
            <h4>-Step 3｜線框圖設計</h4>
            <p>根據流程與需求訪談結果，產出灰階 wireframe，便於團隊對於頁面結構與功能配置達成共識。</p>
            <div class="project-image">
              <img src="img/HR/hr3.png" alt="線框圖設計" />
            </div>
            
            <h4>-Step 4｜易用性測試</h4>
            <p>邀請新進員工及 HR 進行測試，驗證前台與後台是否易用、流程是否順暢，並依據回饋進行調整，減少未來開發修改成本。</p>
            
            <h4>-Step 5｜介面設計與切版</h4>
            <p>根據驗證結果設計最終 UI，並進行 HTML/CSS/JQ 切版，協助工程端順利串接。</p>
            <div class="project-image">
              <video controls>
                <source src="img/HR/hr4.mp4" type="video/mp4">
                您的瀏覽器不支援影片播放。
              </video>
            </div>
            
            <h4>-Step 6｜收集上線後回饋</h4>
            <p>專案上線後，預計持續追蹤使用者反饋與系統數據，作為日後迭代優化的依據。</p>
            
            <h3>專案挑戰與解法</h3>
            
            <h4>-範疇廣大，時間分配困難</h4>
            <p>此專案為期數月，涉及多項子任務。身兼 UR、UX、UI 多重角色，需有效管理時間與任務分配。學習使用 WBS 與每週站立會議追蹤進度，確保不延遲。</p>
            
            <h4>-如何選擇合適的使用者研究方法？</h4>
            <p>經團隊評估時程與人力資源，最終選擇能快速取得結論且效益高的卡片分類法與易用性測試，在 UI 定稿前找出潛在問題，避免開發後期重工。</p>
          `
        },
        3: {
          badge: ["Side Project", "跨平台設計", "SaaS系統"],
          title: "Pack Your Name",
          description: "Pack your name是一個新興線上簽名平台，讓您可以不限時間、不限地點，隨心所欲辦公與洽談。平台兼顧「簡約、環保、時尚」的設計理念，讓用戶在使用過程中能獲得「便利、省時、護眼」的使用者體驗。",
          tags: ["Figma", "React"],
          link: "https://beca323.github.io/packyourname/",
          linkText: "查看mvp",
          details: `
            <h3>User Story</h3>
            <ul>
              <li>每次要 PDF 簽名都要列印出來再掃描好麻煩，自己做一個 Web 版本的簽名服務吧！</li>
              <li>同事催促我趕緊將文件簽名寄出，但我還在計程車上怎麼辦？</li>
              <li>文件多人簽署好麻煩，傳來傳去好容易不見，且不知道進度如何。</li>
            </ul>
            
            <div class="project-results-highlight">
              <h3>需求分析</h3>
              <ul>
                <li>可以離線新增與儲存自己的簽名檔列表。</li>
                <li>可以上傳圖片或 PDF 簽署文件，網頁會即時預覽對應資訊。​</li>
                <li>可以即時預覽的簽署文件上，從簽名檔列表裡選出一個簽名，並將簽名拖動到簽署文件的對應位置。</li>
                <li>可以將簽署文件裡的簽名檔，進行拖拉、放大縮小等行為</li>
                <li>可以看到進度條，知道目前簽署進度，且支援多人簽署</li>
                <li>可以支援跨平台使用</li>
              </ul>
            </div>
            
            <div class="project-image">
              <img src="img/gallery/Pack/Sitemap.png" alt="Sitemap" />
              <p class="image-caption">依照列出的需求，初步整理整個系統需要的架構如何，製作Sitemap</p>
            </div>
            
            <div class="project-image">
              <img src="img/gallery/Pack/pack1.png" alt="網站版本設計" />
              <p class="image-caption">由於此系統應用情境多半為辦公室，因此非使用mobile first的定律，選擇先以網站版本為主</p>
            </div>
            
            <div class="project-image">
              <img src="img/gallery/Pack/pack2.png" alt="RWD設計" />
              <p class="image-caption">網站版本完成後才設計RWD</p>
            </div>
            
            <h3>與工程師溝通</h3>
            <ul>
              <li>整理元件庫，方便在開發時找尋可用元件，套用在各種不同狀態</li>
              <li>將必須注意的邏輯標注在畫面上，以利工程師開發</li>
              <li>標註UI Chart，讓團隊成員清楚操作流程</li>
              <li>RWD少不了電腦版與手機版的畫面標註</li>
            </ul>
            
            <div class="project-image">
              <img src="img/gallery/Pack/pack3.png" alt="元件整理" />
              <p class="image-caption">整理元件使其保證整個系統一致性</p>
            </div>
            
            <div class="project-image">
              <img src="img/gallery/Pack/pack4.png" alt="頁面細節標註" />
              <p class="image-caption">頁面細節標註，以利開發人員有規則可循</p>
            </div>
            
            <h3>最終設計成果Demo</h3>
            
            <div class="project-image">
              <img src="img/gallery/Pack/pack5.png" alt="最終設計成果1" />
            </div>
            
            <div class="project-image">
              <img src="img/gallery/Pack/pack6.png" alt="最終設計成果2" />
            </div>
          `
        }
      };

      // 更新 card 的標題和簡介
      function updateCardContent() {
        document.querySelectorAll(".card").forEach(card => {
          const projectId = card.getAttribute("data-project");
          if (projectId && projectData[projectId]) {
            const project = projectData[projectId];
            const titleEl = card.querySelector(".card-title");
            const descEl = card.querySelector(".card-desc");
            const badgeGroupEl = card.querySelector(".card-badge-group");
            const tagListEl = card.querySelector(".tag-list");
            
            if (titleEl && project.title) {
              titleEl.textContent = project.title;
            }
            if (descEl && project.description) {
              descEl.textContent = project.description;
            }
            // 更新 badge
            if (badgeGroupEl && project.badge) {
              if (Array.isArray(project.badge)) {
                badgeGroupEl.innerHTML = project.badge.map(b => `<span class="card-badge">${b}</span>`).join('');
              } else {
                badgeGroupEl.innerHTML = `<span class="card-badge">${project.badge}</span>`;
              }
            }
            // 更新 tags
            if (tagListEl && project.tags && Array.isArray(project.tags)) {
              tagListEl.innerHTML = project.tags.map(tag => `<li class="tag">${tag}</li>`).join('');
            }
          }
        });
      }

      // 初始化 card 內容
      updateCardContent();

      function openModal(projectId) {
        const project = projectData[projectId];
        if (!project) return;

        // 更新 badge（多個標籤）
        if (Array.isArray(project.badge)) {
          modalBadge.innerHTML = project.badge.map(b => `<span class="badge-tag">${b}</span>`).join('');
        } else {
          modalBadge.textContent = project.badge;
        }
        modalTitle.textContent = project.title;
        modalBody.innerHTML = project.details;
        
        // 重新創建標籤和連結
        let footerHTML = `
          <ul class="tag-list">
            ${project.tags.map(tag => `<li class="tag">${tag}</li>`).join('')}
          </ul>`;
        if (project.link && project.linkText) {
          footerHTML += `<a href="${project.link}" class="text-link" target="_blank" rel="noopener noreferrer">${project.linkText}</a>`;
        }
        modalFooter.innerHTML = footerHTML;

        // 根據專案 ID 更新 modal-sidebar 內容
        const modalSidebar = document.getElementById("modalSidebar");
        if (modalSidebar) {
          if ((projectId === "1" || projectId === 1)) {
            // 第一個專案
            modalSidebar.innerHTML = `
              <div class="modal-sidebar-content">
                <div class="sidebar-section">
                  <h4 class="sidebar-title">負責角色：</h4>
                  <ul class="sidebar-list">
                    <li>使用者研究</li>
                    <li>wireframe規劃設計</li>
                    <li>UI設計</li>
                    <li>網頁開發</li>
                  </ul>
                </div>
                <div class="sidebar-section">
                  <h4 class="sidebar-title">設計工具：</h4>
                  <p class="sidebar-tools">Figma <span class="skill-separator">|</span> Sketch <span class="skill-separator">|</span> NPS <span class="skill-separator">|</span> KANO analysis <span class="skill-separator">|</span> HTML <span class="skill-separator">|</span> CSS <span class="skill-separator">|</span> JQuery</p>
                </div>
              </div>
            `;
          } else if ((projectId === "2" || projectId === 2)) {
            // 第二個專案
            modalSidebar.innerHTML = `
              <div class="modal-sidebar-content">
                <div class="sidebar-section">
                  <h4 class="sidebar-title">負責角色：</h4>
                  <ul class="sidebar-list">
                    <li>使用者研究</li>
                    <li>wireframe規劃設計</li>
                  </ul>
                </div>
                <div class="sidebar-section">
                  <h4 class="sidebar-title">設計工具：</h4>
                  <p class="sidebar-tools">Figma <span class="skill-separator">|</span> Axure <span class="skill-separator">|</span> Card Sorting <span class="skill-separator">|</span> Usability Testing</p>
                </div>
              </div>
            `;
          } else if ((projectId === "3" || projectId === 3)) {
            // 第三個專案
            modalSidebar.innerHTML = `
              <div class="modal-sidebar-content">
                <div class="sidebar-section">
                  <h4 class="sidebar-title">負責角色：</h4>
                  <ul class="sidebar-list">
                    <li>使用者研究</li>
                    <li>wireframe規劃設計</li>
                    <li>UI Mockup設計</li>
                    <li>產品上線測試</li>
                  </ul>
                </div>
                <div class="sidebar-section">
                  <h4 class="sidebar-title">設計工具：</h4>
                  <p class="sidebar-tools">Figma <span class="skill-separator">|</span> Sitemap <span class="skill-separator">|</span> User Story</p>
                </div>
              </div>
            `;
          } else {
            // 其他專案使用原來的導航
            const modalNav = document.getElementById("modalNav");
            if (modalNav) {
              setTimeout(() => {
                generateModalNav();
              }, 200);
            }
          }
        }

        projectModal.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function generateModalNav() {
        const modalNav = document.getElementById("modalNav");
        const navTitles = ["專案概述", "負責內容", "專案成效", "專案重點與挑戰", "專案反思"];
        
        let navHTML = "";
        navTitles.forEach((title, index) => {
          const id = `modal-section-${index}`;
          navHTML += `<a href="#${id}" class="modal-nav-link" data-section="${title}">${title}</a>`;
        });

        modalNav.innerHTML = navHTML;

        // 等待 DOM 更新後再設置 id
        setTimeout(() => {
          // 為對應的標題添加 id
          const headings = modalBody.querySelectorAll("h3");
          headings.forEach((heading) => {
            const headingText = heading.textContent.trim();
            if (navTitles.includes(headingText)) {
              const index = navTitles.indexOf(headingText);
              heading.id = `modal-section-${index}`;
              heading.setAttribute("id", `modal-section-${index}`);
            }
          });

          // 添加點擊事件
          modalNav.querySelectorAll(".modal-nav-link").forEach(link => {
            link.addEventListener("click", (e) => {
              e.preventDefault();
              const targetId = link.getAttribute("href");
              // 嘗試兩種方式查找元素
              const targetElement = document.getElementById(targetId.replace("#", "")) || 
                                   document.querySelector(targetId);
              
              if (targetElement && modalBody) {
                // 直接使用 offsetTop，因為目標元素在 modalBody 內部
                const scrollTop = targetElement.offsetTop - 20;
                
                modalBody.scrollTo({
                  top: Math.max(0, scrollTop),
                  behavior: "smooth"
                });
              }
            });
          });

          // 移除舊的監聽器（如果有的話）
          modalBody.removeEventListener("scroll", updateModalActiveNav);
          
          // 監聽滾動事件
          updateModalActiveNav();
          modalBody.addEventListener("scroll", updateModalActiveNav);
        }, 100);
      }

      function updateModalActiveNav() {
        const navTitles = ["專案概述", "負責內容", "專案成效", "專案重點與挑戰", "專案反思"];
        const headings = modalBody.querySelectorAll("h3");
        const navLinks = document.querySelectorAll(".modal-nav-link");
        
        if (headings.length === 0 || navLinks.length === 0) return;

        const scrollPosition = modalBody.scrollTop;
        const viewportOffset = 120; // 視窗頂部偏移量
        let currentActive = null;

        // 找到所有匹配的標題及其位置
        const matchingHeadings = [];
        headings.forEach((heading) => {
          const headingText = heading.textContent.trim();
          if (navTitles.includes(headingText)) {
            const index = navTitles.indexOf(headingText);
            // 使用 getBoundingClientRect 獲取相對於視窗的位置
            const rect = heading.getBoundingClientRect();
            const containerRect = modalBody.getBoundingClientRect();
            // 計算相對於滾動容器的位置
            const relativeTop = rect.top - containerRect.top + scrollPosition;
            
            matchingHeadings.push({
              element: heading,
              index: index,
              top: relativeTop
            });
          }
        });

        // 從後往前檢查，找到第一個在視窗上方的標題
        for (let i = matchingHeadings.length - 1; i >= 0; i--) {
          const item = matchingHeadings[i];
          if (item.top <= scrollPosition + viewportOffset) {
            currentActive = item.index;
            activeHeading = item.element;
            break;
          }
        }

        // 如果沒有找到，檢查是否在最後一個標題之後
        if (currentActive === null && matchingHeadings.length > 0) {
          const lastItem = matchingHeadings[matchingHeadings.length - 1];
          if (scrollPosition + viewportOffset >= lastItem.top) {
            currentActive = lastItem.index;
          } else {
            currentActive = 0; // 默認激活第一個
          }
        }

        navLinks.forEach((link, index) => {
          link.classList.toggle("active", index === currentActive);
        });
      }

      function closeModal() {
        projectModal.classList.remove("active");
        document.body.style.overflow = "";
      }

      // 為所有卡片添加點擊事件
      document.querySelectorAll(".card").forEach(card => {
        card.style.cursor = "pointer";
        card.addEventListener("click", (e) => {
          // 如果點擊的是連結，不觸發彈窗
          if (e.target.closest(".text-link")) {
            return;
          }
          const projectId = card.getAttribute("data-project");
          if (projectId) {
            openModal(projectId);
          }
        });
      });

      // 關閉彈窗
      if (modalClose) {
        modalClose.addEventListener("click", closeModal);
      }
      if (modalOverlay) {
        modalOverlay.addEventListener("click", closeModal);
      }

      // ESC 鍵關閉彈窗
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && projectModal.classList.contains("active")) {
          closeModal();
        }
      });
    </script>
  </body>
  </html>


